:root{
  --bg:#f6f8ff;
  --card:#ffffff;
  --primary:#3b82f6;
  --muted:#6b7280;
  --bubble:#eef2ff;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  background:var(--bg);
  min-height:100vh;
}

.chat-widget{
  width:360px;
  background:var(--card);
  border-radius:14px;
  box-shadow:0 10px 30px rgba(16,24,40,0.08);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  /* Use dynamic viewport height so keyboard resizing on mobile keeps layout correct */
  height: 100dvh; /* preferred modern unit */
  max-height: 100dvh;
}

.chat-header{padding:16px 16px 8px 16px;border-bottom:1px solid #f1f5f9}
.header-left{display:flex;align-items:center;gap:12px}
.avatar{width:44px;height:44px;border-radius:50%;background:#eef2ff;display:flex;align-items:center;justify-content:center;font-size:20px}
.titles .title{font-weight:700}
.titles .subtitle{font-size:12px;color:var(--muted);margin-top:2px}

.quick-actions{display:flex;gap:8px;padding:12px;flex-wrap:wrap}
.quick-btn{background:#f8fafc;border:1px solid #eef2ff;padding:8px 10px;border-radius:999px;font-size:13px;color:#0f172a;cursor:pointer}
.quick-btn:hover{background:var(--bubble)}

.messages{padding:12px;display:flex;flex-direction:column;gap:10px;min-height:220px;/* allow messages area to grow/shrink with keyboard */
  flex:1 1 auto; overflow:auto;background:linear-gradient(180deg,#fff, #fbfdff)}
.message{display:flex}
.message .bubble{max-width:78%;padding:10px 12px;border-radius:12px;line-height:1.3}
.bot-message{justify-content:flex-start}
.bot-message .bubble{background:var(--bubble);color:#0f172a;border-bottom-left-radius:6px}
.user-message{justify-content:flex-end}
.user-message .bubble{background:var(--primary);color:#fff;border-bottom-right-radius:6px}

.send-form{display:flex;gap:8px;padding:12px;border-top:1px solid #f1f5f9;align-items:center}
.send-form{
  /* keep the input visible when mobile keyboard opens */
  position:sticky;
  bottom:env(safe-area-inset-bottom, 0);
  background: linear-gradient(180deg, rgba(255,255,255,0.0), rgba(255,255,255,1));
}
.send-form input{flex:1;padding:12px 14px;border-radius:999px;border:1px solid #e6eefb;font-size:15px}
.send-btn{width:56px;height:56px;border-radius:50%;background:var(--primary);color:#fff;border:none;font-weight:700;cursor:pointer;box-shadow:0 6px 18px rgba(59,130,246,0.18);transform:translateY(0)}

/* When on mobile and keyboard opens we'll apply a fixed floating style */
.send-form.mobile-fixed{
  position:fixed;
  left:0; right:0;
  bottom:0;
  width:100vw;
  border-radius:0;
  padding:10px 16px 16px 16px;
  background:rgba(255,255,255,0.98);
  box-shadow:0 -2px 24px rgba(16,24,40,0.12);
  z-index:40;
}
.send-form.mobile-fixed .send-btn{width:64px;height:64px}

@media (max-width:420px){
  /* On small screens use available fill and remove large border radius */
  .chat-widget{width:100%;height:100dvh;border-radius:0}
  html,body{height:100%;}
  /* fallback for browsers that don't support dvh */
  @supports not (height:100dvh){
    .chat-widget{height:100vh}
  }
}

/* Additional fallback for older iOS/Android: try webkit-fill-available */
@supports (height: -webkit-fill-available) {
  .chat-widget{height: -webkit-fill-available}
}